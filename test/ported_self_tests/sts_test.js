var assert = require('assert'),
    api = require('../../'),
    helpers = require('../helpers');

describe('sts.js', function () {

  var fwd_in = [
    [ 2, 1],
    [ 2,-1],
    [-2, 1],
    [-2,-1]
  ];

  var inv_in = [
   [ 200, 100],
   [ 200,-100],
   [-200, 100],
   [-200,-100]
  ];

  describe('Foucaut', function () {

    var s_fwd_expect = [
    [223351.10900341379,  111703.9077217125],
    [223351.10900341379,  -111703.9077217125],
    [-223351.10900341379,  111703.9077217125],
    [-223351.10900341379,  -111703.9077217125]
    ];

    var s_inv_expect = [
    [0.0017904931101116717,  0.00089524655487369749],
    [0.0017904931101116717,  -0.00089524655487369749],
    [-0.0017904931101116717,  0.00089524655487369749],
    [-0.0017904931101116717,  -0.00089524655487369749]
    ];

    var e_fwd_expect = [
    [222588.12067589167,  111322.31670069379],
    [222588.12067589167,  -111322.31670069379],
    [-222588.12067589167,  111322.31670069379],
    [-222588.12067589167,  -111322.31670069379]
    ];

    var e_inv_expect = [
    [0.0017966305685702751,  0.00089831528410111959],
    [0.0017966305685702751,  -0.00089831528410111959],
    [-0.0017966305685702751,  0.00089831528410111959],
    [-0.0017966305685702751,  -0.00089831528410111959]
    ];

    var sargs = "+proj=fouc   +a=6400000    +lat_1=0.5 +lat_2=2 +n=0.5";
    var eargs = "+proj=fouc   +ellps=GRS80  +lat_1=0.5 +lat_2=2 +n=0.5";

    helpers.fwd_test(sargs, fwd_in, s_fwd_expect);
    helpers.inv_test(sargs, inv_in, s_inv_expect);
    helpers.fwd_test(eargs, fwd_in, e_fwd_expect);
    helpers.inv_test(eargs, inv_in, e_inv_expect);
  })

  describe('Kavraisky V', function () {

    var s_fwd_expect = [
    [201047.7031108776,  124109.05062917093],
    [201047.7031108776,  -124109.05062917093],
    [-201047.7031108776,  124109.05062917093],
    [-201047.7031108776,  -124109.05062917093]
    ];

    var s_inv_expect = [
    [0.0019894397264987643,  0.00080572070962591153],
    [0.0019894397264987643,  -0.00080572070962591153],
    [-0.0019894397264987643,  0.00080572070962591153],
    [-0.0019894397264987643,  -0.00080572070962591153]
    ];

    var e_fwd_expect = [
    [200360.90530882866,  123685.08247699818],
    [200360.90530882866,  -123685.08247699818],
    [-200360.90530882866,  123685.08247699818],
    [-200360.90530882866,  -123685.08247699818]
    ];

    var e_inv_expect = [
    [0.0019962591348533314,  0.00080848256185253912],
    [0.0019962591348533314,  -0.00080848256185253912],
    [-0.0019962591348533314,  0.00080848256185253912],
    [-0.0019962591348533314,  -0.00080848256185253912]
    ];

    var sargs = "+proj=kav5   +a=6400000    +lat_1=0.5 +lat_2=2 +n=0.5";
    var eargs = "+proj=kav5   +ellps=GRS80  +lat_1=0.5 +lat_2=2 +n=0.5";

    helpers.fwd_test(sargs, fwd_in, s_fwd_expect);
    helpers.inv_test(sargs, inv_in, s_inv_expect);
    helpers.fwd_test(eargs, fwd_in, e_fwd_expect);
    helpers.inv_test(eargs, inv_in, e_inv_expect);
  })

  describe('Quartic Authalic', function () {

    var s_fwd_expect = [
    [223376.62452402918,  111699.65437918637],
    [223376.62452402918,  -111699.65437918637],
    [-223376.62452402918,  111699.65437918637],
    [-223376.62452402918,  -111699.65437918637]
    ];

    var s_inv_expect = [
    [0.0017904931099477471,  0.00089524655490101819],
    [0.0017904931099477471,  -0.00089524655490101819],
    [-0.0017904931099477471,  0.00089524655490101819],
    [-0.0017904931099477471,  -0.00089524655490101819]
    ];

    var e_fwd_expect = [
    [222613.54903309655,  111318.07788798446],
    [222613.54903309655,  -111318.07788798446],
    [-222613.54903309655,  111318.07788798446],
    [-222613.54903309655,  -111318.07788798446]
    ];

    var e_inv_expect = [
    [0.0017966305684046586,  0.00089831528412872229],
    [0.0017966305684046586,  -0.00089831528412872229],
    [-0.0017966305684046586,  0.00089831528412872229],
    [-0.0017966305684046586,  -0.00089831528412872229]
    ];

    var sargs = "+proj=qua_aut   +a=6400000    +lat_1=0.5 +lat_2=2 +n=0.5";
    var eargs = "+proj=qua_aut   +ellps=GRS80  +lat_1=0.5 +lat_2=2 +n=0.5";

    helpers.fwd_test(sargs, fwd_in, s_fwd_expect);
    helpers.inv_test(sargs, inv_in, s_inv_expect);
    helpers.fwd_test(eargs, fwd_in, e_fwd_expect);
    helpers.inv_test(eargs, inv_in, e_inv_expect);
  })

  describe('McBryde-Thomas Flat-Polar Sine (No. 1)', function () {

    var s_fwd_expect = [
    [204831.24057099217,  121816.46669603503],
    [204831.24057099217,  -121816.46669603503],
    [-204831.24057099217,  121816.46669603503],
    [-204831.24057099217,  -121816.46669603503]
    ];

    var s_inv_expect = [
    [0.0019526892859206603,  0.00082088471512331508],
    [0.0019526892859206603,  -0.00082088471512331508],
    [-0.0019526892859206603,  0.00082088471512331508],
    [-0.0019526892859206603,  -0.00082088471512331508]
    ];

    var e_fwd_expect = [
    [204131.51785027285,  121400.33022550763],
    [204131.51785027285,  -121400.33022550763],
    [-204131.51785027285,  121400.33022550763],
    [-204131.51785027285,  -121400.33022550763]
    ];

    var e_inv_expect = [
    [0.0019593827209883237,  0.00082369854658027549],
    [0.0019593827209883237,  -0.00082369854658027549],
    [-0.0019593827209883237,  0.00082369854658027549],
    [-0.0019593827209883237,  -0.00082369854658027549]
    ];

    var sargs = "+proj=mbt_s   +a=6400000    +lat_1=0.5 +lat_2=2 +n=0.5";
    var eargs = "+proj=mbt_s   +ellps=GRS80  +lat_1=0.5 +lat_2=2 +n=0.5";

    helpers.fwd_test(sargs, fwd_in, s_fwd_expect);
    helpers.inv_test(sargs, inv_in, s_inv_expect);
    helpers.fwd_test(eargs, fwd_in, e_fwd_expect);
    helpers.inv_test(eargs, inv_in, e_inv_expect);
  })
});
