var assert = require('assert'),
    api = require('../../'),
    helpers = require('../helpers');

describe('nsper.js', function () {

  var fwd_in = [
    [ 2, 1],
    [ 2,-1],
    [-2, 1],
    [-2,-1]
  ];

  var inv_in = [
    [ 200, 100],
    [ 200,-100],
    [-200, 100],
    [-200,-100]
  ];

  describe('Near-sided perspective', function () {

    var s_fwd_expect = [
      [ 222239.816114099842,  111153.763991924759],
      [ 222239.816114099842, -111153.763991924759],
      [-222239.816114099842,  111153.763991924759],
      [-222239.816114099842, -111153.763991924759]
    ];

    var s_inv_expect = [
      [ 0.00179049311728792437,  0.000895246558425396135],
      [ 0.00179049311728792437, -0.000895246558425396135],
      [-0.00179049311728792437,  0.000895246558425396135],
      [-0.00179049311728792437, -0.000895246558425396135]
    ];

    var sargs = "+proj=nsper   +a=6400000  +h=1000000";

    helpers.fwd_test(sargs, fwd_in, s_fwd_expect);
    helpers.inv_test(sargs, inv_in, s_inv_expect);
  })

  describe('Tilted perspective', function () {

    var s_fwd_expect = [
      [ 170820.288955531199,  180460.865555804776],
      [ 246853.941538942483, -28439.8780357754222],
      [-246853.941538942483,  28439.8780357754222],
      [-170820.288955531199, -180460.865555804776]
    ];

    var s_inv_expect = [
      [ 0.00198870552603137678,  0.000228871872278689991],
      [ 0.00137632081376749859, -0.00145364129728205432],
      [-0.00137632081376749859,  0.00145364129728205432],
      [-0.00198870552603137678, -0.000228871872278689991]
    ];

    var sargs = "+proj=tpers   +a=6400000  +h=1000000 +azi=20";

    helpers.fwd_test(sargs, fwd_in, s_fwd_expect);
    helpers.inv_test(sargs, inv_in, s_inv_expect);
  })

});
